<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>博客个人中心</title>
    <link rel="stylesheet" href="css/common.css">
    <link rel="stylesheet" href="css/blog-center.css">
</head>
<body>
    <!-- 导航栏 -->
    <div class="daohang">
        <img src="./image/头像2.png" alt="头像">
        <div class="spacer"></div>
        <a href="blog-list.html">主页</a>
        <!-- <a href="blog-edit.html">写博客</a> -->
        <a href="blog-add.html">写博客</a> 
        <a href="javascript:logout()">注销</a>

    </div>

    <!-- 页面主体 -->
    <div class="container" >
        <!-- 左侧布局 -->
        <div class="container-left">
            <div class="card">
                <img src="./image/头像.png" alt="头像" onclick="uploadimg1()" title="修改头像" id="headimg">
                <h2 id="username">TenjoUtena</h2>
                <a href="">github</a>
                <div class="counter">
                    <span>文章</span>
                    <span>分类</span>
                </div>
                <div class="counter">
                    <span id="artTotal">2</span>
                    <span>3</span>
                </div>
                <div class="counter">
                    <!-- 注释,小字 -->
                    <span class="prompt">点击头像可修改头像</span>
                </div>
            </div>
        </div>
        <!-- 右侧布局 -->
        <div class="container-right" style="overflow: hidden;">
            <!-- 点击修改头像之后,弹出的小窗 -->
            <!-- <div class="conter1">
                <div class="upload">
                    <div>
                        <label for="f1">选择文件:<br>
                        </label>
                        <input type="file" id="f1" style="display: none" class="f1" onchange="getPath()"/>
                    </div>
                    预览小圆
                    <div class="yuan">
                        <img src="./image/头像.png" alt="" class="previewimg" >
                        <img src="./image/头像.png" alt="" class="previewimg1" >
                    </div>
                    <div class="check">
                        <input type="button" value="取消上传" onclick="dismissForm()" class="checkbutton"/>
                        <input type="button" value="确认上传" onclick="submitForm()" class="checkbutton"/>

                    </div>
                </div>
            </div> -->
            <!-- 显示文章|评论|数据 -->
            <div class="navList">
                <div>
                    <span class="navbotton" >
                        <a href="blog-article.html" target="frameName">文章</a>
                       
                    </span>
                    <span class="navbotton" >
                        <!-- <a href="blog-comment.html" target="frameName">评论</a> -->
                        <a href="#" >评论</a>
                    </span>
                    <span class="navbotton">
                        <!-- <a href="blog-edit.html" target="frameName">数据</a> -->
                        <a href="#" >数据</a>
                    </span>
                </div>
            </div>
            <div style="width: 100%;height: 100%" class="ifr">
                <iframe frameborder="0" width="100%" height="100%" name="frameName" src="blog-article.html" scrolling="auto" id="ifDiv" ></iframe>
            </div>
           

        </div>
    </div>
    <script src="js/jquery.min.js"></script>

    <script>
        //上传头像
        //点击修改头像之后,小窗出现
        function uploadimg1() {
            jQuery(".ifr").find("iframe")[0].src ="blog-upload.html";
        }
    

        // //获取用户头像,显示头像,名字
        // function getProfilePicture(){
        //     $.ajax({
        //         type:'get',
        //         url:'upload',
        //         success:function(body){
        //             let headimg = document.querySelector("#headimg");
        //             headimg.src = body.profilePicture;
        //             let h2 = document.querySelector('#username');
        //             h2.innerHTML = body.username;
        //         }
        //     });

        // }
        // getProfilePicture();

      
        // //获取作者文章数量
        // getArticles();
        // function getArticles() {
        //     $.ajax({
        //         type:'post',
        //         url:'author',
        //         success: function(body) {
        //             console.log(body);
        //             // 把文章数量设置到界面上
        //             let articles = document.querySelector('#artTotal');
        //             articles.innerHTML = body ;
        //             console.log(body);
        //         }
        //     });
        // }

        //获取当前登录者的文章数量,用户名,头像
        function showData(){
            jQuery.ajax({
                url: "/user/showData",
                type: "post",
                success: function(body){
                    if(body!=null && body.code==200){
                        jQuery("#username").text(body.data.username);
                        jQuery("#artTotal").text(body.data.artTotal);
                        jQuery("#headimg")[0].src = "./image/1.jpg";
                        // jQuery("#headimg").src(body.data.photo); 关于照片需修改
                    }
                }
            });
        }
        showData();

    //   //删除文章
    //   function myDelete(id){
    //         //弹框确认
    //         var strid = {
    //             id: id
    //         }
    //         if(confirm("是否确定要删除?")){
    //             jQuery.ajax({
    //                 url: "/art/delete",
    //                 type: "post",
    //                 data: strid, //键值对
    //                 success:function(body){
    //                     if(body!=null && body.code==200 && body.data==1){
    //                         console.log("删除成功!");
    //                         location.href = location.href; //刷新当前页面
    //                     }else{
    //                         console.log(id + "删除失败!");
    //                     }
    //                 }
    //             });
                
    //         }
    //     }

        //注销
        function logout(){
            if(confirm("确认注销?")){
                jQuery.ajax({
                    url: "/user/logout",
                    type: "post",
                    success: function(body){
                        if(body!=null && body.code==200){
                            location.href = "/login.html";
                        }
                    }
                });
            }

        }

    </script>
</body>
</html>